"use strict";function save_options(){return $(".options_restore_default_settings:checked").length?($(".options_restore_default_settings:checked").removeAttr("checked"),restore_defaults(),restore_options(),void $('a[href="#home"]').tab("show")):void chrome.storage.local.get(SETTINGS.local,function(a){$.each(a.options.tracking_sites,function(b,c){a.options.tracking_sites[b].track_allowed=$(".tracking_sites[data-site-allowed-value='"+b+"']:checked").length?!0:!1}),a.options.collect_statistics_allowed=1==$("select[name=collect_statistics_allow]").val()?!0:!1,a.options.add_trackings_to_profile_allowed=1==$("select[name=add_trackings_to_profile_allowed]").val()?!0:!1,a.options.show_context_menu=1==$("select[name=show_context_menu]").val()?!0:!1,chrome.storage.local.set({options:a.options},function(){$(".save-button").removeClass("btn-success").addClass("btn-default").html(chrome.i18n.getMessage("options_save_button_saved")),setTimeout(function(){$(".save-button").removeClass("btn-default").addClass("btn-success").html(chrome.i18n.getMessage($(".save-button").data("i18n")))},1e3)})})}function restore_options(){chrome.storage.local.get($.extend(SETTINGS.local,{trackings:{},stores:{},orders:{},aliStoreList:{}}),function(a){if(a.options.tracking_sites){var b="";$(".options_sites_loader").hide(),$(".options_sites_loader_container").html(""),$.each(a.options.tracking_sites,function(a,c){b=c.track_allowed?' checked="checked"':"",$('<label><input type="checkbox" data-site-allowed-value="'+a+'" class="tracking_sites" name="tracking_sites" value="'+a+'"'+b+">"+c.name+"</label><span>&nbsp; &nbsp;</span>").appendTo($(".options_sites_loader_container"))})}$("select[name=collect_statistics_allow]").val(a.options.collect_statistics_allowed?1:0),$("select[name=add_trackings_to_profile_allowed]").val(a.options.add_trackings_to_profile_allowed?1:0),$("select[name=show_context_menu]").val(a.options.show_context_menu?1:0),$(".memory").html(roughSizeOfObject(a))})}function restore_defaults(){chrome.storage.local.remove("options")}!function(){GdeposylkaState.get(function(a,b){$(".options_notification_change_link").attr("href",GdePosylkaExt.generateGoUrlByToken(b,a,"/auth/profile")).html(GdePosylkaExt.generateGoUrlByToken(null,a,"/auth/profile")),restore_options(),$(".save-button").click(save_options)})}();